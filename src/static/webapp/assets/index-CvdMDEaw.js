(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const d of a)if(d.type==="childList")for(const s of d.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const d={};return a.integrity&&(d.integrity=a.integrity),a.referrerPolicy&&(d.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?d.credentials="include":a.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function o(a){if(a.ep)return;a.ep=!0;const d=n(a);fetch(a.href,d)}})();const m={ProgramAdded:"program_added",ProgramDeleted:"program_deleted",ProgramUpdated:"program_updated",ProgramStarted:"program_started",ProgramCompleted:"program_completed",SeriesStarted:"series_started",SeriesCompleted:"series_completed",SeriesStopped:"series_stopped",SeriesNext:"series_next",EventStarted:"event_started",TargetStatus:"target_status",AudioAdded:"audio_added",AudioDeleted:"audio_deleted",Chrono:"chrono",AdminModeStatus:"admin_mode_status",BackendIssue:"backend_issue"};let L=null;function k(e){return L&&L.close(),L=new EventSource(Y,{withCredentials:!1}),Object.values(m).forEach(t=>{L.addEventListener(t,n=>{try{const o=JSON.parse(n.data);console.log("Received SSE event:",t,o),e(t,o)}catch(o){console.error("Failed to parse event:",t,o)}})}),L.onopen=()=>{console.log("SSE connection established")},L.onerror=t=>{console.error("SSE connection error:",t)},L}const ce=()=>localStorage.getItem("SERVER_BASE_URL")||"http://localhost";let _=ce(),g=`${_}/api/v1`,Y=`${_}/sse/v1`,x=localStorage.getItem("ADMIN_BEARER_TOKEN")||null;function le(e){_=e,g=`${_}/api/v1`,Y=`${_}/sse/v1`,localStorage.setItem("SERVER_BASE_URL",e),typeof k=="function"&&(L&&L.close(),k())}function Z(){const e=document.getElementById("settings-form"),t=document.getElementById("server-base-url"),n=document.getElementById("settings-status"),o=document.getElementById("admin-enable-form"),a=document.getElementById("admin-disable-form"),d=document.getElementById("admin-password"),s=document.getElementById("admin-mode-status");t.value=_,e.onsubmit=i=>{i.preventDefault();const c=t.value.trim();if(!c||!ue(c)){n.textContent="Please enter a valid URL.",n.style.color="red";return}le(c),n.textContent="Server Base URL updated!",n.style.color="green",r()},o.onsubmit=async i=>{i.preventDefault();const c=d.value;s.textContent="";try{x=(await Se(c)).token,localStorage.setItem("ADMIN_BEARER_TOKEN",x),d.value="",s.textContent="Admin mode enabled!",s.style.color="green",r()}catch{s.textContent="Failed to enable admin mode.",s.style.color="red"}},a.onsubmit=async i=>{i.preventDefault(),s.textContent="";try{await we(x),x=null,localStorage.removeItem("ADMIN_BEARER_TOKEN"),s.textContent="Admin mode disabled!",s.style.color="green",r()}catch{s.textContent="Failed to disable admin mode.",s.style.color="red"}};async function r(){try{const{enabled:i}=await be();i?x?(o.classList.add("hidden"),a.classList.remove("hidden"),s.textContent="Admin mode is enabled.",s.style.color="green"):(o.classList.add("hidden"),a.classList.add("hidden"),s.textContent="Admin mode is enabled (by another client).",s.style.color="orange"):(o.classList.remove("hidden"),a.classList.add("hidden"),s.textContent="Admin mode is disabled.",s.style.color="gray")}catch{s.textContent="Could not fetch admin mode status.",s.style.color="red"}}Z.updateAdminModeUI=r,r()}function ue(e){try{const t=new URL(e);return/^https?:$/.test(t.protocol)&&(/^[a-zA-Z0-9.-]+$/.test(t.hostname)||/^(\d{1,3}\.){3}\d{1,3}$/.test(t.hostname))?/^(\d{1,3}\.){3}\d{1,3}$/.test(t.hostname)?t.hostname.split(".").every(n=>{const o=Number(n);return o>=0&&o<=255}):!0:!1}catch{return!1}}const v=Object.freeze({GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",PATCH:"PATCH"});async function Q(){const e=await fetch(`${g}/programs`);return f(e)}async function ee(e){const t=await fetch(`${g}/programs/${e}`);return f(t)}async function me(e,t){const n=t?`${g}/programs/${t}/update`:`${g}/programs`,o=t?v.PUT:v.POST,a=await y(n,{method:o,headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return f(a)}async function pe(e){const t=await y(`${g}/programs/${e}/delete`,{method:v.DELETE,headers:{"Content-Type":"application/json"}});return f(t)}async function ge(e){const t=await y(`${g}/programs/${e}/load`,{method:"POST"});return f(t)}async function fe(){const e=await y(`${g}/programs/start`,{method:"POST"});return f(e)}async function he(){const e=await y(`${g}/programs/stop`,{method:"POST"});return f(e)}async function ye(e){const t=await y(`${g}/programs/series/${e}/skip_to`,{method:v.POST,headers:{"Content-Type":"application/json"}});return f(t)}async function Ee(){const e=await fetch(`${g}/audios`);return f(e)}async function Le(e,t,n){const o=new FormData;o.append("file",e),o.append("codec",t),o.append("title",n);const a=await y(`${g}/audios`,{method:v.POST,body:o});return f(a)}async function ve(e){const t=await y(`${g}/audios/${e}/delete`,{method:v.DELETE,headers:{"Content-Type":"application/json"}});return f(t)}async function Ce(){const e=await y(`${g}/targets/toggle`,{method:"POST"});return f(e)}async function be(){const e=await fetch(`${g}/admin-mode/status`);return f(e)}async function Se(e){const t=await fetch(`${g}/admin-mode/enable`,{method:v.POST,headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e})});return f(t)}async function we(){const e=await y(`${g}/admin-mode/disable`,{method:v.POST});return f(e)}async function _e(e){const t=await y(`${g}/audios/${e}/play`,{method:v.POST,headers:{"Content-Type":"application/json"}});return f(t)}async function f(e){if(!e.ok)throw new Error(`Request failed: ${e.statusText}`);const t=e.headers.get("Content-Type");return t&&t.includes("application/json")?e.json():null}async function y(e,t={}){const n=localStorage.getItem("ADMIN_BEARER_TOKEN");return t.headers=t.headers||{},n&&(t.headers.Authorization=`Bearer ${n}`),await fetch(e,t)}let P=[];async function b(){return P=(await Ee()).audios||[],P}function F(e){return P.find(n=>n.id===e).title}const z=Object.freeze({Default:"default",Field:"field"});let V=null;function te(e,t,n=z.Default){n===z.Field?Te(e,t):Ae(e,t)}function Ae(e,t){e.innerHTML="",V=ne(t.series);let n=document.createElement("div");n.className="timeline-tooltip",e.appendChild(n),V.forEach((o,a)=>{const d=document.createElement("div");d.className="series",o.optional&&d.classList.add("optional"),d.dataset.seriesIndex=a;const s=document.createElement("div");s.className="series-title",s.textContent=o.name+(o.optional?" (optional)":""),d.appendChild(s);const r=document.createElement("div");r.className="events",o.events.forEach((i,c)=>{const l=document.createElement("div");l.className=`event ${i.symbolClass}`,l.dataset.eventIndex=c,l.addEventListener("mouseenter",()=>{let E="";i.audio_ids&&i.audio_ids.length>0&&(E="<br>Audios:<br>"+i.audio_ids.map(T=>`"${F(T)}" (${T})`).join("<br>")),n.innerHTML=`<strong>Duration:</strong> ${Math.trunc(i.duration/1e3)}s<br><strong>Command:</strong> ${i.command||"none"}${E}`,n.style.display="block";const D=l.getBoundingClientRect();n.style.left=`${D.left+window.scrollX}px`,n.style.top=`${D.top+window.scrollY-40}px`}),l.addEventListener("mouseleave",()=>{n.style.display="none"});const u=document.createElement("div");u.className="dur",u.textContent=Math.trunc(i.duration/1e3),l.appendChild(u);const p=document.createElement("div");p.className="symbol",p.textContent=i.symbolText,l.appendChild(p);const h=document.createElement("div");if(h.className="acc",h.textContent=Math.trunc(i.acc/1e3),l.appendChild(h),i.audio_ids&&i.audio_ids.length>0){const E=i.audio_ids.map(F).join(", ");l.setAttribute("title",E)}r.appendChild(l)}),d.appendChild(r),e.appendChild(d)})}function Te(e,t){e.innerHTML="";let n=document.createElement("div");n.className="logic-timeline-tooltip",e.appendChild(n),ne(t.series).forEach((a,d)=>{const s=document.createElement("div");s.className="logic-timeline-container",a.optional&&s.classList.add("optional"),s.dataset.seriesIndex=d;const r=document.createElement("div");r.className="series-title",r.textContent=a.name+(a.optional?" (optional)":""),s.appendChild(r);const i=document.createElement("div");i.className="logic-timeline-centerline";let c=0;a.events.forEach(u=>{const p=Math.max(1,Math.trunc(u.duration/1e3)),h=document.createElement("div");h.className=`logic-segment ${u.command||""}`,h.style.width=`${p*40}px`,h.dataset.duration=u.duration;const E=document.createElement("div");E.className="logic-info-line",E.textContent=`${p}s`,u.audio_ids&&(E.textContent+=" A"),h.appendChild(E),h.addEventListener("mouseenter",D=>{let T="";u.audio_ids&&u.audio_ids.length>0&&(T="<br>Audios:<br>"+u.audio_ids.map(G=>`"${F(G)}" (${G})`).join("<br>")),n.innerHTML=`<strong>Duration:</strong> ${p}s<br><strong>Command:</strong> ${u.command||"none"}${T}`,n.style.display="block";const R=h.getBoundingClientRect();n.style.left=`${R.left+window.scrollX}px`,n.style.top=`${R.top+window.scrollY-40}px`}),h.addEventListener("mouseleave",()=>{n.style.display="none"}),u.command==="show"?h.classList.add("above"):u.command==="hide"&&h.classList.add("on-line"),h.title=`${u.command||""} (${p}s)`,i.appendChild(h),c+=p});const l=document.createElement("div");l.className="logic-timeline-axis",l.style.position="relative",l.style.width=`${c*40}px`;for(let u=0;u<=c;u++){const p=document.createElement("span");p.className="logic-timeline-tick",p.textContent=u,p.id=`logic-tick-${d}-${u}`,p.dataset.seriesIndex=d,p.dataset.second=u,p.style.position="absolute",p.style.left=`${u*40}px`,p.style.transform="translateX(-50%)",l.appendChild(p)}s.appendChild(i),s.appendChild(l),e.appendChild(s)})}function ne(e){return e.map(t=>{let n=0;const o=t.events.map(a=>{const d=a.duration;let s="no-action",r="";return a.audio_ids&&a.audio_ids.length>0?(r="A",a.command==="show"?s="show audio":a.command==="hide"?s="hide audio":s="audio"):a.command==="show"?s="show":a.command==="hide"?s="hide":s="no-action",n+=d,{...a,duration:d,acc:n,symbolClass:s,symbolText:r}});return{...t,events:o}})}function B(e,t){document.querySelectorAll(".series").forEach(a=>a.classList.remove("current")),document.querySelectorAll(".event").forEach(a=>a.classList.remove("current")),document.querySelectorAll(".logic-segment").forEach(a=>a.classList.remove("current")),document.querySelectorAll(".logic-timeline-container").forEach(a=>a.classList.remove("current"));const n=document.querySelector(`[data-series-index='${e}']`);if(n){n.classList.add("current");const a=n.querySelector(`[data-event-index='${t}']`);a&&a.classList.add("current")}const o=document.querySelectorAll(".logic-timeline-container")[e];if(o){o.classList.add("current");const a=o.querySelectorAll(".logic-segment");a[t]&&a[t].classList.add("current")}}function xe(){document.querySelectorAll(".series").forEach(e=>e.classList.remove("current")),document.querySelectorAll(".event").forEach(e=>e.classList.remove("current"))}function Pe(e){const n=document.querySelectorAll(".logic-timeline-container")[e];if(!n)return;const o=n.querySelector(".logic-timeline-axis");if(!o)return;const a=o.querySelector(".logic-timeline-cursor");a&&a.remove()}const q={program_id:null,running_series_start:null,current_series_index:null,current_event_index:null,target_status_shown:!1};function C(e){Object.assign(q,e)}function A(){const e=document.getElementById("start-btn"),t=document.getElementById("stop-btn"),{program_id:n,running_series_start:o}=q;n!==null&&o===null?(e.classList.remove("hidden"),t.classList.add("hidden")):o!==null?(e.classList.add("hidden"),t.classList.remove("hidden")):(e.classList.add("hidden"),t.classList.add("hidden"))}const S=document.getElementById("choose-program"),w=document.getElementById("choose-serie"),oe=document.getElementById("start-btn"),ae=document.getElementById("stop-btn"),$e=document.getElementById("toggle-btn"),Be=document.getElementById("run-timeline-wrapper"),Ie=document.getElementById("run-program-timeline"),j=document.getElementById("chrono");let H=!1;async function Ne(){const e=parseInt(S.value,10);if(!isNaN(e)){const t=S.querySelector("option[disabled]");t&&t.remove(),await ge(e);try{const n=await ee(e);window.currentProgram=n,te(Ie,n),B(0,0),C({program_id:e,running_series_start:null}),A(),w.innerHTML="";const o=document.createElement("option");o.disabled=!0,o.selected=!0,o.textContent="Choose a series",w.appendChild(o),n.series.forEach((a,d)=>{const s=document.createElement("option");s.value=d,s.textContent=a.name+(a.optional?" (optional)":""),w.appendChild(s)}),w.classList.remove("hidden"),Be.classList.remove("hidden"),oe.disabled=!1,ae.disabled=!1}catch(n){console.error("Failed to fetch program by ID:",n)}}}async function Oe(){const e=parseInt(w.value,10);isNaN(e)||ye(e)}async function De(){await fe()}async function Re(){await he()}async function ke(){await Ce()}async function N(){try{const e=await Q();S.innerHTML="";const t=document.createElement("option");t.disabled=!0,t.selected=!0,t.textContent="Choose program",S.appendChild(t),e.slice().sort((n,o)=>n.id-o.id).forEach(n=>{const o=document.createElement("option");o.value=n.id,o.textContent=n.title,S.appendChild(o)}),H||(S.addEventListener("change",Ne),w.addEventListener("change",Oe),oe.addEventListener("click",De),ae.addEventListener("click",Re),$e.addEventListener("click",ke),H=!0)}catch(e){console.error("Failed to initialize Run tab:",e)}}function Fe({detail:{program_id:e}}){C({program_id:null,running_series_start:null}),xe(),A()}function Me({detail:{program_id:e,series_index:t}}){C({program_id:e,running_series_start:new Date,current_series_index:t,current_event_index:0}),B(t,0),j.classList.remove("hidden"),A()}function Ue({detail:{program_id:e,series_index:t}}){C({running_series_start:null}),j.classList.add("hidden"),A(),Pe(t)}function qe({detail:{program_id:e,series_index:t,event_index:n}}){C({program_id:e,running_series_start:null,current_series_index:t,current_event_index:n}),B(t,n),j.classList.add("hidden"),A()}function je({detail:{program_id:e,series_index:t}}){C({program_id:e,current_series_index:t,current_event_index:0}),B(t,0),A()}function Je({detail:{program_id:e,series_index:t,event_index:n}}){C({program_id:e,current_series_index:t,current_event_index:n}),B(t,n)}function Ge({detail:{status:e}}){C({target_status_shown:e==="shown"})}function ze({detail:{elapsed:e}}){const t=document.getElementById("chrono");t&&(t.textContent=`${Math.floor(e/1e3)}s`);const{current_series_index:n}=q}function se({detail:{program_id:e}}){N()}function de({detail:{program_id:e}}){N()}window._runTabGlobalListenersAdded||(document.addEventListener(m.ProgramCompleted,Fe),document.addEventListener(m.SeriesStarted,Me),document.addEventListener(m.SeriesCompleted,Ue),document.addEventListener(m.SeriesStopped,qe),document.addEventListener(m.SeriesNext,je),document.addEventListener(m.EventStarted,Je),document.addEventListener(m.TargetStatus,Ge),document.addEventListener(m.Chrono,ze),document.addEventListener(m.ProgramAdded,se),document.addEventListener(m.ProgramDeleted,de),document.addEventListener("audio_playback",()=>{}),window._runTabGlobalListenersAdded=!0);const J=document.getElementById("audio-file"),ie=document.getElementById("audio-title"),Ve=document.getElementById("audio-form"),M=document.getElementById("audio-container");let K=!1;function He(e){var d,s;const t=e.target,n=t.closest("tr");if(!n)return;const o=(d=n.querySelector(".id-cell"))==null?void 0:d.textContent,a=(s=n.querySelector(".title-cell"))==null?void 0:s.textContent;if(t.classList.contains("delete-btn")&&confirm(`Are you sure you want to delete "${a}"?`)&&ve(o).then(()=>{alert(`Audio "${a}" deleted successfully.`),b().then($)}).catch(r=>{console.error("Failed to delete audio:",r),alert("Failed to delete audio.")}),t.classList.contains("play-btn")&&_e(o).then(()=>{}).catch(r=>{alert("Failed to play audio.")}),t.classList.contains("primary")&&t.textContent==="JSON"){const r=P.find(i=>i.id==o);if(r){const i=JSON.stringify(r,null,2),c=new Blob([i],{type:"application/json"}),l=URL.createObjectURL(c);window.open(l,"_blank")}}}async function $(){try{M.innerHTML="",P.slice().sort((e,t)=>e.id-t.id).forEach(e=>{const t=document.createElement("tr"),n=document.createElement("td");n.textContent=e.id,n.className="id-cell",t.appendChild(n);const o=document.createElement("td");o.textContent=e.title,o.className="title-cell",t.appendChild(o);const a=document.createElement("td"),d=document.createElement("button");d.textContent="Play",d.classList.add("play-btn"),a.appendChild(d),t.appendChild(a);const s=document.createElement("td");if(!e.readonly){const c=document.createElement("button");c.textContent="Delete",c.classList.add("delete-btn"),s.appendChild(c)}t.appendChild(s);const r=document.createElement("td"),i=document.createElement("button");i.textContent="JSON",i.classList.add("primary"),r.appendChild(i),t.appendChild(r),M.appendChild(t)})}catch(e){console.error("Error loading audios:",e)}}async function Ke(){K||(J.addEventListener("change",We),Ve.addEventListener("submit",Xe),M.addEventListener("click",He),K=!0),await $()}function We(){const e=J.files[0];if(e){const t=e.name.lastIndexOf("."),n=t>0?e.name.substring(0,t):e.name;ie.value=n}}async function Xe(e){e.preventDefault();const t=J.files[0],n=ie.value,o=document.getElementById("audio-codec").value;if(!(!t||!n||!o))try{await Le(t,o,n),e.target.reset(),await b(),await $()}catch(a){console.error("Upload failed:",a),alert("Upload failed")}}if(!window._audiosTabGlobalListenersAdded){async function e({detail:{id:n}}){await b(),await $(),console.log("Audio added:",n)}async function t({detail:{id:n}}){await b(),await $(),console.log("Audio deleted:",n)}document.addEventListener(m.AudioAdded,e),document.addEventListener(m.AudioDeleted,t),window._audiosTabGlobalListenersAdded=!0}const I=document.getElementById("program-file"),W=document.getElementById("add-program-btn"),U=document.getElementById("programs-container"),Ye=document.getElementById("upload-programs-timeline-wrapper"),Ze=document.getElementById("upload-programs-timeline");function re(e=null,t=null){I.onchange=async n=>{const o=n.target.files[0];if(!o)return;const a=new FileReader;a.onload=async d=>{try{const s=JSON.parse(d.target.result);await me(s,e),alert(e?`Program "${t}" updated successfully.`:"Program added successfully!"),await O()}catch(s){alert(e?`Failed to update program: ${s.message}`:`Failed to add program: ${s.message}`)}},a.readAsText(o)},I.value="",I.click()}async function O(){try{U.innerHTML="",(await Q()).slice().sort((t,n)=>t.id-n.id).forEach(t=>{const n=document.createElement("tr"),o=document.createElement("td");o.textContent=t.id,o.className="id-cell",n.appendChild(o);const a=document.createElement("td");a.textContent=t.title,a.className="title-cell",n.appendChild(a);const d=document.createElement("td");if(!t.readonly){const c=document.createElement("button");c.textContent="Delete",c.classList.add("delete-btn"),d.appendChild(c)}n.appendChild(d);const s=document.createElement("td");if(!t.readonly){const c=document.createElement("button");c.textContent="Update",c.classList.add("primary"),s.appendChild(c)}n.appendChild(s);const r=document.createElement("td"),i=document.createElement("button");i.textContent="JSON",i.classList.add("primary"),r.appendChild(i),n.appendChild(r),U.appendChild(n)})}catch(e){console.error("Error loading programs:",e)}}let X=!1;function Qe(){re()}function et(e){var d,s;const t=e.target,n=t.closest("tr");if(!n)return;const o=(d=n.querySelector(".id-cell"))==null?void 0:d.textContent,a=(s=n.querySelector(".title-cell"))==null?void 0:s.textContent;t.classList.contains("delete-btn")&&confirm(`Are you sure you want to delete "${a}"?`)&&pe(o).then(()=>{alert(`Program "${a}" deleted successfully.`)}).catch(r=>{console.error("Failed to delete program:",r),alert("Failed to delete program.")}),t.classList.contains("primary")&&t.textContent==="Update"&&re(o,a),t.classList.contains("primary")&&t.textContent==="JSON"&&ee(o).then(r=>{const i=JSON.stringify(r,null,2),c=new Blob([i],{type:"application/json"}),l=URL.createObjectURL(c);window.open(l,"_blank")}).catch(r=>{alert("Failed to fetch full program JSON.")})}async function tt(){X||(W&&W.addEventListener("click",Qe),U.addEventListener("click",et),X=!0),I.addEventListener("change",e=>{const t=e.target.files[0];if(!t)return;const n=new FileReader;n.onload=o=>{const a=JSON.parse(o.target.result);te(Ze,a),Ye.classList.remove("hidden")},n.readAsText(t)}),await O()}if(!window._programsTabGlobalListenersAdded){let e=function({detail:{id:d}}){O(),console.log("Program added:",d)},t=function({detail:{id:d}}){console.log("Program deleted:",d)},n=function({detail:d}){O(),console.log("Program updated:",d==null?void 0:d.program_id)};var se=e,de=t,at=n;document.addEventListener(m.ProgramAdded,e),document.addEventListener(m.ProgramDeleted,t),document.addEventListener(m.ProgramUpdated,n),window._programsTabGlobalListenersAdded=!0}function nt(e,t){const n=new CustomEvent(e,{detail:t});document.dispatchEvent(n)}document.addEventListener("DOMContentLoaded",async()=>{const n="MalmÃ¶ Skyttegille Rotation Target v0.8.0";document.title=n,document.querySelector("#footer span").textContent=n;try{await b()}catch(u){console.error("Failed to load audios:",u)}await N();const o=document.getElementById("run-tab-button"),a=document.getElementById("audio-tab-button"),d=document.getElementById("programs-tab-button"),s=document.getElementById("settings-tab-button"),r=document.getElementById("run-section"),i=document.getElementById("audio-section"),c=document.getElementById("programs-section"),l=document.getElementById("settings-section");document.querySelector("#footer span"),o.addEventListener("click",async()=>{o.classList.add("active"),a.classList.remove("active"),d.classList.remove("active"),s.classList.remove("active"),r.classList.remove("hidden"),i.classList.add("hidden"),c.classList.add("hidden"),l.classList.add("hidden"),await N()}),a.addEventListener("click",async()=>{a.classList.add("active"),o.classList.remove("active"),d.classList.remove("active"),s.classList.remove("active"),i.classList.remove("hidden"),r.classList.add("hidden"),c.classList.add("hidden"),l.classList.add("hidden"),await Ke()}),d.addEventListener("click",()=>{d.classList.add("active"),o.classList.remove("active"),a.classList.remove("active"),s.classList.remove("active"),c.classList.remove("hidden"),r.classList.add("hidden"),i.classList.add("hidden"),l.classList.add("hidden"),tt()}),s.addEventListener("click",()=>{s.classList.add("active"),o.classList.remove("active"),a.classList.remove("active"),d.classList.remove("active"),l.classList.remove("hidden"),r.classList.add("hidden"),i.classList.add("hidden"),c.classList.add("hidden"),Z()}),k(nt)});if(!window._audiosTabGlobalListenersAdded){let e=function({detail:{id:n}}){b().then(refreshAudioList),console.log("Audio added:",n)},t=function({detail:{id:n}}){b().then(refreshAudioList),console.log("Audio deleted:",n)};document.addEventListener(m.AudioAdded,e),document.addEventListener(m.AudioDeleted,t),window._audiosTabGlobalListenersAdded=!0}if(!window._programsTabGlobalListenersAdded){let e=function({detail:{id:o}}){refreshProgramsList(),console.log("Program added:",o)},t=function({detail:{id:o}}){refreshProgramsList(),console.log("Program deleted:",o)},n=function({detail:o}){refreshProgramsList(),console.log("Program updated:",o==null?void 0:o.program_id)};document.addEventListener(m.ProgramAdded,e),document.addEventListener(m.ProgramDeleted,t),document.addEventListener("program_updated",n),window._programsTabGlobalListenersAdded=!0}
